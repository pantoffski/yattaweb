webpackJsonp([1],{0:function(t,n,e){e("j1ja"),t.exports=e("bicQ")},"2jmq":function(t,n,e){"use strict";var r=function(){var t=this,n=t.$createElement;t._self._c;return t._m(0)},o=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"howTo"}},[e("h2",[t._v("HowTo")]),t._v(" สมมุติงานวิ่งชื่อ "),e("em",{staticClass:"o"},[t._v("soundRun")]),e("br"),t._v(" ก็เปิด browser ไปที่ https://yattaweb.herokuapp.com/"),e("em",{staticClass:"o"},[t._v("soundRun")]),e("br"),t._v(" ถ้าหลังชื่องานไม่เป็นวงกลมสีเขียวคือ ใช้ net มือถือที่ block socket.io"),e("br"),t._v(" (เหมือนมี True ได้เจ้าเดียว) หรือไม่ก็\r\n  server ล่ม"),e("br"),e("br"),t._v(" "),e("h3",[t._v("post tags")]),t._v(" "),e("em",{staticClass:"r"},[t._v("post")]),t._v(" ไปที่ https://yattaweb.herokuapp.com/"),e("em",{staticClass:"o"},[t._v("soundRun")]),t._v("/addTags"),e("br"),t._v(" postData อยู่ในรูป [[matId,tagId,tStamp],[matId,tagId,tStamp],...]"),e("br"),e("br"),t._v(" เช่น"),e("br"),t._v(" data={'tags': '[[1,1,1000],[1,2,2000]]'}"),e("br"),e("br"),t._v(" "),e("a",{attrs:{href:"test.py",target:"_blank"}},[t._v("(อ้างอิง ตัวอย่าง code python)")]),t._v(" "),e("br"),t._v(" ระบบจะตอบ จำนวน tag ที่ post เข้ามา เช่น data={'tags': '[[1,1,1000],[1,2,2000]]'} จะตอบ "),e("em",{staticClass:"g"},[t._v("2")]),t._v(" ไรงี้\r\n  "),e("h3",[t._v("ลบ tags ทั้งหมดในงานวิ่งนั้นๆ")]),t._v(" "),e("em",{staticClass:"r"},[t._v("post")]),t._v(" ไปที่ https://yattaweb.herokuapp.com/"),e("em",{staticClass:"o"},[t._v("soundRun")]),t._v("/clear"),e("br"),t._v(" postData อยู่ในรูป data={'race': 'กลับทิศชื่องานวิ่ง'}"),e("br"),e("br"),t._v(" เช่น\r\n  "),e("br"),t._v(" post ไปที่ https://yattaweb.herokuapp.com/"),e("em",{staticClass:"o"},[t._v("soundRun")]),t._v("/clear"),e("br"),t._v(" data={'race':'\r\n  "),e("em",{staticClass:"o"},[t._v("nuRdnuos")]),t._v("'} อะไรงี้\r\n  "),e("br"),e("br"),t._v("ลบสำเร็จตอบ "),e("em",{staticClass:"g"},[t._v("ok")]),t._v(", ลบไม่สำเร็จตอบ "),e("em",{staticClass:"g"},[t._v("error")]),t._v(" "),e("br"),t._v(" ก็ไปตั้งชื่องานวิ่งเพื่อ test กันเองตามสะดวกเลย soundRun, poomerRun, icmm2020, ฯลฯ\r\n")])}],a={render:r,staticRenderFns:o};n.a=a},"4vft":function(t,n,e){"use strict";var r=e("NYxO"),o=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};n.a={name:"raceViewer",props:["raceName"],data:function(){return{isUpload:!1}},methods:o({},Object(r.b)(["foo","bar"]),{sortByTagIdClass:function(){if(1==this.sortBy)return 1==this.sortDi?"up":"down"},sortByMatIdClass:function(){if(0==this.sortBy)return 1==this.sortDi?"up":"down"},sortBytStampClass:function(){if(2==this.sortBy)return 1==this.sortDi?"up":"down"},sortByMatId:function(){this.$store.commit("sortByMatId")},sortByTagId:function(){this.$store.commit("sortByTagId")},sortBytStamp:function(){this.$store.commit("sortBytStamp")}}),mounted:function(){this.$socket.emit("joinRace",this.raceName)},computed:o({},Object(r.d)({isConnected:function(t){return t.isConnected},tags:function(t){return t.tags},sortBy:function(t){return t.sortBy},sortDi:function(t){return t.di},needInitRaceName:function(t){return t.needInitRaceName}}),Object(r.c)(["sortedTags"])),watch:{needInitRaceName:function(){this.needInitRaceName&&this.$socket.emit("joinRace",this.raceName),this.$store.commit("doneInitRaceName")}},components:{}}},"5yWD":function(t,n){},"9DDJ":function(t,n,e){"use strict";function r(t){return function(){var n=t.apply(this,arguments);return new Promise(function(t,e){function r(o,a){try{var s=n[o](a),c=s.value}catch(t){return void e(t)}if(!s.done)return Promise.resolve(c).then(function(t){r("next",t)},function(t){r("throw",t)});t(c)}return r("next")})}}function o(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}var a=e("7+uW"),s=e("NYxO"),c=e("hMcO"),i=e.n(c),u=e("YwQ6");a.a.use(s.a);var d,l=new s.a.Store({state:{isConnected:!1,needInitRaceName:!1,sortBy:2,di:1,tags:[]},getters:{sortedTags:function(t){var n=t.sortBy;return t.tags.sort(function(e,r){return e[n]===r[n]?0:e[n]<r[n]?1*t.di:-1*t.di})}},mutations:{SOCKET_CONNECT:function(t,n){t.isConnected=!0,t.needInitRaceName=!0},SOCKET_DISCONNECT:function(t,n){t.isConnected=!1},SOCKET_TAGS:function(t,n){t.tags=[].concat(o(t.tags),o(n))},SOCKET_CLEARTAGS:function(t,n){t.tags=[]},SOCKET_CURRTAGS:function(t,n){t.tags=n},doneInitRaceName:function(t){t.needInitRaceName=!1},sortByMatId:function(t){0!=t.sortBy?(t.sortBy=0,t.di=1):t.di=-1*t.di},sortByTagId:function(t){1!=t.sortBy?(t.sortBy=1,t.di=1):t.di=-1*t.di},sortBytStamp:function(t){2!=t.sortBy?(t.sortBy=2,t.di=1):t.di=-1*t.di}},actions:{initDb:function(){function t(t){return n.apply(this,arguments)}var n=r(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("initDb"),d=new u.a("MyDatabase"),d.version(1).stores({runners:"tagId, &bibNo, raceCat, updatedAt"}),d.open().then(function(){return Promise.resolve()}).catch(function(t){alert("เปลี่ยน browser ซะ")});case 4:case"end":return t.stop()}},t,this)}));return t}(),init:function(){function t(t){return n.apply(this,arguments)}var n=r(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("init"),t.next=3,n.dispatch("initDb");case 3:console.log("done initDb"),d.runners.where("updatedAt").above(0).desc().limit(1).each(function(t){t?console.log(t.updatedAt):console.log(0)});case 5:case"end":return t.stop()}},t,this)}));return t}(),foo:function(t){console.log("action foo");var n=[{tagId:73,bibNo:80,bibName:"Lhongg",name:"พีระพจน์ เดียวจิตเจริญ",raceCat:"30m",updatedAt:1513156713285}];d.runners.bulkPut(n).then(function(t){console.log("success ",t)}).catch(function(t){console.log("error ",t)}),d.runners.each(function(t){console.log(t)})},bar:function(t){console.log("bar",t),d.runners.where("updatedAt").above(0).desc().limit(1).each(function(t){console.log(t)}),d.runners.where("bibNo").equals(80).modify({bibName:"Lhong",raceCat:"30m"}).then(function(t){console.log("mod",t)}),d.runners.get({bibNo:80}).then(function(t){console.log(t)})}}});a.a.use(i.a,"http://localhost:3000",l),n.a=l},AyOd:function(t,n,e){"use strict";function r(t){e("F4IQ")}var o=e("uEzm"),a=e("2jmq"),s=e("VU/8"),c=r,i=s(o.a,a.a,!1,c,null,null);n.a=i.exports},BTy9:function(t,n,e){"use strict";var r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("router-view")],1)},o=[],a={render:r,staticRenderFns:o};n.a=a},F4IQ:function(t,n){},OzJ6:function(t,n,e){"use strict";var r=e("7+uW"),o=e("/ocq"),a=e("ZuMv"),s=e("AyOd");r.a.use(o.a),n.a=new o.a({mode:"history",base:"/",routes:[{path:"/:raceName/",name:"raceViewer",component:a.a,props:!0},{path:"/",name:"howTo",component:s.a},{path:"*",redirect:"/"}]})},ZuMv:function(t,n,e){"use strict";function r(t){e("5yWD")}var o=e("4vft"),a=e("aC5R"),s=e("VU/8"),c=r,i=s(o.a,a.a,!1,c,null,null);n.a=i.exports},aC5R:function(t,n,e){"use strict";var r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"raceViewer"}},[e("h3",{class:t.isConnected?"connected":""},[t._v("raceName : "+t._s(t.raceName))]),e("br"),t._v(" tags : "+t._s(t.tags.length)+"\r\n  "),e("br"),e("br"),t._v(" "),e("button",{on:{click:t.foo}},[t._v("foo")]),t._v(" "),e("button",{on:{click:t.bar}},[t._v("bar")]),t._v(" "),e("br"),t._v(" "),e("table",{attrs:{border:"1"}},[e("thead",[e("tr",[e("td",[e("span",{class:t.sortByMatIdClass(),on:{click:t.sortByMatId}},[t._v("matId")])]),t._v(" "),e("td",[e("span",{class:t.sortByTagIdClass(),on:{click:t.sortByTagId}},[t._v("tagId")])]),t._v(" "),e("td",[e("span",{class:t.sortBytStampClass(),on:{click:t.sortBytStamp}},[t._v("tStamp")])])])]),t._v(" "),e("tbody",t._l(t.sortedTags,function(n,r){return e("tr",{key:r},[e("td",[t._v(t._s(n[0]))]),t._v(" "),e("td",[t._v(t._s(n[1]))]),t._v(" "),e("td",[t._v(t._s(n[2]))])])}))])])},o=[],a={render:r,staticRenderFns:o};n.a=a},bicQ:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("mtWM"),o=e.n(r),a=e("7+uW"),s=e("NYxO"),c=e("OzJ6"),i=e("9DDJ"),u=e("creg"),d=e("hMcO");e.n(d);a.a.use(s.a),a.a.prototype.$http=o.a,new a.a({el:"#app",store:i.a,router:c.a,template:"<App/>",sockets:{},components:{App:u.a},created:function(){console.log("app created"),this.$store.dispatch("init")}})},creg:function(t,n,e){"use strict";var r=e("wCqm"),o=e("BTy9"),a=e("VU/8"),s=a(r.a,o.a,!1,null,null,null);n.a=s.exports},uEzm:function(t,n,e){"use strict";n.a={name:"raceViewer"}},wCqm:function(t,n,e){"use strict";e("NYxO");n.a={name:"app",data:function(){return{}},methods:{},computed:{foo:function(){return"bar"}}}}},[0]);
//# sourceMappingURL=main.js.map?b968782c50024e2fc50d